<!--
TODO:
Change the damn words, all Capitalized??
Home Page is the damn robot. Damn, need to get it changed.

-->


<!doctype html>
<html>
<!-- Include meta tag to ensure proper rendering and touch zooming -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="js/Bootstrap.css">
<!-- Include Esri stylesheets -->
<!-- Include jQuery Mobile stylesheets -->
<link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.4.5.css" />
<link rel="stylesheet" type="text/css" href="css/index.css" />
<link rel="stylesheet" href="js/jquery.mobile.icons.min.css" />

<head>
    <meta charset="utf-8">
    <title>Sungei Buloh Wetland Reserve</title>
    <script src="js/jquery-2.2.4.js"></script>
    <script src="js/jquery.mobile-1.4.5.js"></script>
    <script>
        $(document).on("pagecreate", "#trails", function() {
            $(document).on("swipeleft swiperight", "#trails", function(e) {
                // We check if there is no open panel on the page because otherwise
                // a swipe to close the left panel would also open the right panel (and v.v.).
                // We do this by checking the data that the framework stores on the page element (panel: open).
                if ($(".ui-page-active").jqmData("panel") !== "open") {
                    if (e.type === "swipeleft") {
                        $("#left-panel").panel("open");
                    } else if (e.type === "swiperight") {
                        $("#left-panel").panel("open");
                    }
                }
            });
        });
    </script>

    <!-- Google API -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyAvb7dow6Wx1-p26gf0MHyuWVN4NPJ3cQQ">
    </script>

    <!-- rendering. -->
    <script>
        function loadKmlLayer(src, map) {
            var kmlLayer = new google.maps.KmlLayer(src);
            kmlLayer.setMap(map);
        }

        // The whole map
        $(document).on("pageshow", "#map1", function() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: new google.maps.LatLng(1.44023, 103.73526),
                zoom: 2,
                mapTypeId: 'roadmap'
            });
            loadKmlLayer("http://www.chenqiurong.com/a.kmz", map)
        });

        // Coastal Trail rendering
        $(document).on("pageshow", "#coastalMap", function() {
            var map = new google.maps.Map(document.getElementById('coastalMapDiv'), {
                center: new google.maps.LatLng(1.44023, 103.73526),
                zoom: 2,
                mapTypeId: 'terrain'
            });

            loadKmlLayer("http://www.chenqiurong.com/coastal_trail1.kmz", map)

        });

        // Migratory Trail rendering
        $(document).on("pageshow", "#migratoryMap", function() {
            var map = new google.maps.Map(document.getElementById('migratoryMapDiv'), {
                center: new google.maps.LatLng(1.44023, 103.73526),
                zoom: 2,
                mapTypeId: 'terrain'
            });

            loadKmlLayer("http://www.chenqiurong.com/Migratory_Bird_Trail.kmz", map)

        });

        // Forest Trail rendering
        $(document).on("pageshow", "#forestMap", function() {
            var map = new google.maps.Map(document.getElementById('forestMapDiv'), {
                center: new google.maps.LatLng(1.44023, 103.73526),
                zoom: 2,
                mapTypeId: 'terrain'
            });

            loadKmlLayer("http://www.chenqiurong.com/Forest_Trail1.kmz", map)

        });

        // Forest Trail rendering
        $(document).on("pageshow", "#midCanopyMap", function() {
            var map = new google.maps.Map(document.getElementById('midCanopyMapDiv'), {
                center: new google.maps.LatLng(1.44023, 103.73526),
                zoom: 2,
                mapTypeId: 'terrain'
            });
            loadKmlLayer("http://www.chenqiurong.com/Mid_Canopy_Walk1.kmz", map)
        });



        // Bus Locations
        $(document).on("pageshow", "#getthere", function() {
          var map
            map = new google.maps.Map(document.getElementById('getthereMapDiv'), {
                center: new google.maps.LatLng(1.44023, 103.73526),
                zoom: 14,
                mapTypeId: 'roadmap'
            });
            // Create marker
            var marker = new google.maps.Marker({
              map: map,
              position: new google.maps.LatLng(1.44023, 103.73526),
              title: 'Sungei Buloh Radius'
            });

            // Add circle overlay and bind to marker
            var circle = new google.maps.Circle({
              map: map,
              radius: 1000,    // 10 miles in metres
              fillColor: '#AA0000'
            });
            circle.bindTo('center', marker, 'position');

            var request = {
                location: new google.maps.LatLng(1.44023, 103.73526),
                radius: 1000,
                types: ['train_station', 'bus_station', 'subway_station', 'transit_station']
            };
            
            infowindow = new google.maps.InfoWindow();
            var service = new google.maps.places.PlacesService(map);
            service.search(request, callback);

            function callback(results, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    for (var i = 0; i < results.length; i++) {
                        createMarker(results[i]);
                    }
                }
            }

            function createMarker(place) {

                var placeLoc = place.geometry.location;
                var marker = new google.maps.Marker({
                    map: map,
                    position: place.geometry.location
                });
                var content = '<strong style="font-size:1.2em">' + place.name + '</strong>' +
                    '<br/><strong>Latitude:</strong>' + placeLoc.lat() +
                    '<br/><strong>Longitude:</strong>' + placeLoc.lng() +
                    '<br/><strong>Type:</strong>' + place.types[0] +
                    '<br/><strong>Rating:</strong>' + (place.rating || 'n/a');
                var more_content = '<img src="http://googleio2009-map.googlecode.com/svn-history/r2/trunk/app/images/loading.gif"/>';

                //make a request for further details
                service.getDetails({
                    reference: place.reference
                }, function(place, status) {
                    if (status == google.maps.places.PlacesServiceStatus.OK) {
                        more_content = '<hr/><strong><a href="' + place.url + '" target="details">Details</a>';

                        if (place.website) {
                            more_content += '<br/><br/><strong><a href="' + place.website + '" target="details">' + place.website + '</a>';
                        }
                    }
                });


                google.maps.event.addListener(marker, 'click', function() {

                    infowindow.setContent(content + more_content);
                    infowindow.open(map, this);
                });
            }
        });


                // Food Locations
                $(document).on("pageshow", "#hungry", function() {
                    var map = new google.maps.Map(document.getElementById('hungryMapDiv'), {
                        center: new google.maps.LatLng(1.44023, 103.73526),
                        zoom: 14,
                        mapTypeId: 'roadmap'
                    });

                    var request = {
                        location: new google.maps.LatLng(1.44023, 103.73526),
                        radius: 2500,
                        types: ['restaurant']
                    };
                    infowindow = new google.maps.InfoWindow();
                    var service = new google.maps.places.PlacesService(map);
                    service.search(request, callback);

                    function callback(results, status) {
                        if (status == google.maps.places.PlacesServiceStatus.OK) {
                            for (var i = 0; i < results.length; i++) {
                                createMarker(results[i]);
                            }
                        }
                    }

                    function createMarker(place) {

                        var placeLoc = place.geometry.location;
                        var marker = new google.maps.Marker({
                            map: map,
                            position: place.geometry.location
                        });
                        var content = '<strong style="font-size:1.2em">' + place.name + '</strong>' +
                            '<br/><strong>Latitude:</strong>' + placeLoc.lat() +
                            '<br/><strong>Longitude:</strong>' + placeLoc.lng() +
                            '<br/><strong>Type:</strong>' + place.types[0] +
                            '<br/><strong>Rating:</strong>' + (place.rating || 'n/a');
                        var more_content = '<img src="http://googleio2009-map.googlecode.com/svn-history/r2/trunk/app/images/loading.gif"/>';

                        //make a request for further details
                        service.getDetails({
                            reference: place.reference
                        }, function(place, status) {
                            if (status == google.maps.places.PlacesServiceStatus.OK) {
                                more_content = '<hr/><strong><a href="' + place.url + '" target="details">Details</a>';

                                if (place.website) {
                                    more_content += '<br/><br/><strong><a href="' + place.website + '" target="details">' + place.website + '</a>';
                                }
                            }
                        });


                        google.maps.event.addListener(marker, 'click', function() {

                            infowindow.setContent(content + more_content);
                            infowindow.open(map, this);
                        });
                    }
                });



    </script>


    <style>
        #map1,
        #map,
        #coastalMap,
        #coastalMapDiv,
        #migratoryMap,
        #migratoryMapDiv,
        #forestMap,
        #forestMapDiv,
        #midCanopyMap,
        #midCanopyMapDiv,
        #getthere,
        #getthereMapDiv,
        #hungry,
        #hungryMapDiv {
            width: 100%;
            height: 80%;
        }
    </style>
</head>

<body>

    <!-- Main Page -->
    <div id="home" data-role="page" data-theme="d">
        <div data-role="header" data-position="inline">
            <h1>Sungei Buloh Wetland Reserve</h1>
        </div>
        <!--page1 header-->
        <div data-role="main" class="ui-content">
            <p>Get to know more about Sungei Buloh Wetland Reserve!</p>
            <div align="center">
                <img src="img/img1.png" width="250" height="300" alt="" />
            </div>
            <a href="#map-page" class="ui-btn ui-icon-location ui-btn-icon-left">Locate Them</a>
            <!--button to load the location map-->
        </div>

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>

    </div>
    <!--Main Page -->

    <!-- Map Page -->
    <div id="map1" data-role="map-page" data-theme="d" data-url="map-page">

        <!--page1 header-->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="map">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--Map End Page -->

    <!-- Trail Page -->
    <div id="trails" data-role="page" data-theme="d">
        <div data-role="header" data-position="inline">
            <h1>Different Trails</h1>
        </div>
        <!--page1 header-->

        <div id="ctrail" data-role="main" class="ui-content">
            <p align="center">Coastal Trail</p>

            <div align="center">
                <img src="img/coastraltrail.png" width="250" height="300" alt="" />
            </div>

            <p>There may things happening around the Coastal Trail. </p>
            <p>There are 5 pods; The Fantail Pod, Eagle Point, KingFisher, Mudskipper Pod and Dragonfly Pod which attracts foreigners and local citizens. Five pods have been constructed at various locations around the wetland reserve extension. These raised
                viewing platforms allow visitors unobstructed views of the reserve and the sea. </p>
            <p>An exception is the Dragonfly Pod, which is located inland and overlooks a freshwater pond, where one can catch glimpses of dragonflies and damselflies.</p>
            <p>There is also a Visitor Center to help people when they are lost or need guidance </p>

            <a href="#coastalMap" class="ui-btn ui-icon-location ui-btn-icon-left">Locate Them</a>
            <!--button to load the location map-->
        </div>


        <div id="mbtrail" data-role="main" class="ui-content">
            <!--<a name="migratory" align="center">Migratory Bird Trail</a>-->
            <p align="center">Migratory Bird Trail</p>
            <div align="center">
                <img src="img/migratorybirdtrail.png" width="250" height="300" alt="" />
            </div>
            <p>The Migratory Bird Trail is the main attraction.</p>
            <p>Thousand of birds arrives at the Reserve every year in August/September.</p>
            <a href="#migratoryMap" class="ui-btn ui-icon-location ui-btn-icon-left">Locate Them</a>
            <!--button to load the location map-->
        </div>

        <div id="ftrail" data-role="main" class="ui-content">
            <!--<a name="forest" align="center">Forest Trail</a>-->
            <p align="center">Forest Trail</p>
            <div align="center">
                <img src="img/foresttrail.png" width="250" height="300" alt="" />
            </div>
            <p>The Forest Trail offers visitors the chance to experience the sights and sounds of the reserve up close, and learn more about the plants and wildlife which are unique to the reserve.</p>
            <p>When you trek along the boardwalk you will be brought to many mangroves. But the real challenge for the kids will be trying to pinpoint the elusive mudskipper - which you will manage to do so after some time!</p>
            <a href="#forestMap" class="ui-btn ui-icon-location ui-btn-icon-left">Locate Them</a>
            <!--button to load the location map-->
        </div>

        <div id="mcwalk" data-role="main" class="ui-content">
            <!--<a name="canopy" align="center">Mid Canopy Walk</a>-->
            <p align="center">Mid Canopy Walk</p>
            <div align="center">
                <img src="img/midcanopywalk.png" width="250" height="300" alt="" />
            </div>
            <p> Mid-canopy Walk immerses visitors in the understory of a secondary forest through an elevated, 120m-long boardwalk, where they can spot birds and insects like cicadas that reside in the mid-canopy region and forest floor</p>
            <a href="#midCanopyMap" class="ui-btn ui-icon-location ui-btn-icon-left">Locate Them</a>
            <!--button to load the location map-->
        </div>


        <div data-role="panel" id="left-panel">
            <form>
                <input data-type="search" id="filterControlgroup-input">
            </form>
            <div data-role="controlgroup" data-filter="true" data-input="#filterControlgroup-input">
                <a href="#coastal" class="ui-btn ui-shadow ui-corner-all">Coastral Trail</a>
                <a href="#migratory" class="ui-btn ui-shadow ui-corner-all">Migratory Bird Trail</a>
                <a href="#forest" class="ui-btn ui-shadow ui-corner-all">Forest Trail</a>
                <a href="#canopy" class="ui-btn ui-shadow ui-corner-all">Mid Canopy Walk</a>
            </div>
            <a href="#trails" data-rel="close" class="ui-btn ui-btn-icon-left ui-icon-delete">Close</a>
        </div>
        <!-- /panel -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--Main Page -->

    <!-- Map Page -->
    <div id="mappage" data-role="page" data-theme="d">
        <div data-role="header" data-position="inline">
            <h1>Trails</h1>
        </div>
        <!--page1 header-->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- End of Feature Page -->

    <!-- About Page-->
    <div id="more" data-role="page" data-theme="d">
        <div data-role="header" data-position="inline">
            <h1>About</h1>
        </div>
        <!--About header-->
        <div data-role="main" class="ui-content">
            <div data-role="collapsible">
                <h1>Introduction</h1>
                <p>This is an app about the Sungei Buloh Wetland Reserve.</p>
                <p>It is First Singapore's ASEAN Heritage Park.</p>
                <p>It was awarded a certificate by Wetlands International, marking the reserve's formal entry into the East Asian-Australasian Shorebird Site Network. As from 2016, the park includes a 202 hectares of mangroves, mudflats, ponds and forests.</p>
            </div>
            <div data-role="collapsible">
                <h1>Trails</h1>
                <p>It shows and talks about the trails</p>
                <br />
                <p>It will show the locations of those trails when you click on the "Locate Them" button.</p>
            </div>
            <div data-role="collapsible">
                <h1>Credits Goes to:</h1>
                <p>Designer 1: Chen Qiu Rong (P1542093)</p>
                <p>Designer 2: Daryl Loh Kai Heng(P1529591)</p>
                <p>Designer 3: Bavani D/o Raman (P1551271)</p>
                <br />
                <p>From: Singapore Polytechnic</p>
                <p>Class: DISM/FT/2B/02</p>
            </div>

            <a href="#getthere" class="ui-btn ui-shadow ui-corner-all">Nearby Bus Stops</a>

            <a href="#hungry" class="ui-btn ui-shadow ui-corner-all">Hungry Go Where?</a>


        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--End About Page-->

    <!--  -->
    <div id="coastalMap" data-role="page" data-theme="d" data-url="coastalMap">
        <!-- header -->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="coastalMapDiv">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="migratoryMap" data-role="page" data-theme="d" data-url="migratoryMap">
        <!-- header -->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="migratoryMapDiv">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="forestMap" data-role="page" data-theme="d" data-url="forestMap">
        <!-- header -->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="forestMapDiv">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="midCanopyMap" data-role="page" data-theme="d" data-url="midCanopyMap">
        <!-- header -->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="midCanopyMapDiv">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="getthere" data-role="page" data-theme="d" data-url="getthere">
        <!-- header -->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="getthereMapDiv">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="hungry" data-role="page" data-theme="d" data-url="hungry">
        <!-- header -->
        <div data-role="header">
            <h1>Location</h1>
        </div>

        <!-- map loads here... -->
        <div role="main" class="ui-content" id="hungryMapDiv">
        </div>

        <!-- Foot -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#home" data-icon="home" data-iconpos="top">Home</a></li>
                    <li><a href="#trails" data-icon="grid" data-iconpos="top">Trails</a></li>
                    <li><a href="#mappage" data-icon="grid" data-iconpos="top">Map</a></li>
                    <li><a href="#more" data-icon="info" data-iconpos="top">More</a></li>
                </ul>
            </div>
        </div>
    </div>


</body>

</html>
